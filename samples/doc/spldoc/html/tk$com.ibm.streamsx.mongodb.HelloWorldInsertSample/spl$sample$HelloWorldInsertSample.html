<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="SPL File HelloWorldInsertSample.spl"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_compilationunit"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>SPL File HelloWorldInsertSample.spl</title>
</head>
<body id="spldoc_compilationunit">


<h1 class="title topictitle1">SPL File <tt class="ph tt">HelloWorldInsertSample.spl</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">Toolkits</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.mongodb.HelloWorldInsertSample.html">com.ibm.streamsx.mongodb.HelloWorldInsertSample 1.0.0</a> &gt; <a class="xref" href="ns$sample.html">sample</a> &gt; HelloWorldInsertSample.spl</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Content</h2>
  
  <dl class="dl">
    <dt class="dt dlterm"/>
<dd class="dd"/>

    
      <dt class="dt dlterm splhead-2">Operators</dt>

      <dd class="dd">
<ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="spl$sample$HelloWorldInsertSample.html#spldoc_compilationunit__composite_operator__HelloWorldInsertSample">HelloWorldInsertSample</a></strong>: Run two beacons to create different inputs.
</li>

</ul>

      </dd>

    
  </dl>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Composites</h2>
  
</div>

<div class="section" id="spldoc_compilationunit__composite_operator__HelloWorldInsertSample"><h2 class="title sectiontitle splpart">public composite HelloWorldInsertSample</h2>
  
</div>

<div class="section splgraph">
  <embed class="image" src="../../image/tk$com.ibm.streamsx.mongodb.HelloWorldInsertSample/op$sample$HelloWorldInsertSample.svg" width="337" height="154"/>
</div>

<div class="section">

<p class="p">Run two beacons to create different inputs. Look inside <a class="xref" href="spl$sample$HelloWorldInsertSample.html#spldoc_compilationunit__composite_operator__HelloWorldInsertSample">HelloWorldInsertSample</a> SPL code to see different uses of InsertDocument with the description. 
</p>

</div>

<div class="section">
</div>

<div class="section">
</div>

<div class="section">
</div>

<div class="section"><h2 class="title sectiontitle splhead-2">SPL Source Code</h2>
  
</div>


<div class="section">
   <pre class="pre codeblock">

 composite HelloWorldInsertSample {
 	graph
 		stream&lt;rstring greeting1&gt; B1Stream = Beacon()  {
             param iterations: 1;
             output B1Stream :
             	greeting1 = "Hello world";
         }
         
 		stream&lt;rstring greeting2&gt; B2Stream = Beacon()  {
             param iterations: 1;
             output B2Stream :
             	greeting2 = "Hello again";
         }
         
         stream&lt;rstring error1, rstring error2, rstring error3, rstring error4, rstring error5, rstring error6, rstring error7, rstring error8&gt; MongoSink =
         	Insert(B1Stream; B2Stream) {
         	param
         		dbHost : "localhost";
         		
         	/*
         	 * Uncomment authentication parameter for custom authentication method
         	 */
 
 //        		authentication : {mechanism = getSubmissionTimeValue("mechanism", "SCRAM-SHA-1"),
 //        						  user = getSubmissionTimeValue("username", "mongouser"),
 //        						  pwd = getSubmissionTimeValue("password", "passw0rd"),
 //        						  db = getSubmissionTimeValue("adminDB", "admin"),
 //        						  digestPassword = (boolean)getSubmissionTimeValue("digestPassword", "true"),
 //        						  serviceName = getSubmissionTimeValue("serviceName", ""),
 //        						  serviceHostname = getSubmissionTimeValue("serviceHostname", "")};
 
 
         	/*
         	 * Uncomment sslOptions parameter to configure SSL
         	 */
 				// Create etc directory and add there PEM file.
 //        		sslOptions : {sslMode = true, caFile = "", pemKeyFile = getThisToolkitDir() + "/etc/mongodb.pem", pemKeyPassword = "", crlFile = "", allowInvalidCertificates = false, allowInvalidHostnames = false};
 
         	/*
         	 * Uncomment username/password parameters for a default authentication method
         	 */
 //        		username : getSubmissionTimeValue("username", "mongouser");
 //        		password : getSubmissionTimeValue("password", "passw0rd");
 
         	/*
         	 * Uncomment profiling parameter to enable profiling mode
         	 */
 //        		profiling : all;
 
         	output MongoSink :
         		/**
 				 * Store a tuple as is, the resulting document is:
 				 * { "_id" : ObjectId("53c795f7e66ebea0c454c80f"), "greeting1" : "Hello world" }
 				 */
         		error1 = InsertDocument("streams", "sample", B1Stream),
 
         		/**
 				 * Store a tuple under the specified 'greetings2' key, the resulting document is:
 				 * { "_id" : ObjectId("53c795f7e66ebea0c454c810"), "greeting2" : { "greeting2" : "Hello again" } }
 				 */
         		error2 = InsertDocument("streams", "sample", "greeting2", B2Stream),
 
         		/**
 				 * Store a tuple attribute under the specified 'greetings3' key (simple type always requires a key), the resulting document is:
 				 * { "_id" : ObjectId("53c795f7e66ebea0c454c811"), "greeting3" : "Hello world" }
 				 */
         		error3 = InsertDocument("streams", "sample", "greeting3", greeting1),
 
         		/**
 				 * Store a constant list under the specified 'greetings4' key (list/set type always requires a key), the resulting document is:
 				 * { "_id" : ObjectId("53c795f7e66ebea0c454c812"), "greeting4" : [  "Hello",  "world" ] }
 				 */
         		error4 = InsertDocument("streams", "sample", "greeting4", ["Hello", "world"]),
 
         		/**
 				 * Store a constant map (map/tuple doesn't require key, but can use it to add a root key), the resulting document is:
 				 * { "_id" : ObjectId("53c795f7e66ebea0c454c813"), "greeting5_1" : "Hello", "greeting5_2" : "world" }
 				 */
         		error5 = InsertDocument("streams", "sample", {"greeting5_1" : "Hello", "greeting5_2" : "world"}),
 
         		/**
 				 * Store a constant rstring JSON, the resulting document is:
 				 * { "_id" : ObjectId("53c795f7e66ebea0c454c814"), "greeting6_1" : "Hello", "greeting6_2" : "world" }
 				 */
         		error6 = InsertDocumentAsJson("streams", "sample", '{"greeting6_1" : "Hello", "greeting6_2" : "world"}'),
 
         		/**
 				 * Store a constant rstring JSON (doesn't require key, but can use it to add a root key), the resulting document is:
 				 * { "_id" : ObjectId("53c795f7e66ebea0c454c815"), "greeting7_1" : { "greeting7_2" : [ "Hello", "world" ] } }
 				 */
         		error7 = InsertDocumentAsJson("streams", "sample", "greeting7_1", '{"greeting7_2" : ["Hello", "world"]}'),
 
         		/**
 				 * 	Store a constant rstring JSON with wrong syntax, the exception is:
 				 * FailedToParse: First character in field must be [A-Za-z$_]: offset:1 of:{[ : "Hello world"}
 				 */
         		error8 = InsertDocumentAsJson("streams", "sample", '{[ : "Hello world"}');
         }
         
 		/**
 		 * Will be called when at least one error occured
 		 */
         () as ErrorSink = FileSink(MongoSink)   {
             param
                 file : "/dev/stdout";
                 flush : 1u;
                 quoteStrings : false;
         }
 }

   </pre>

</div>

</div>


</body>
</html>