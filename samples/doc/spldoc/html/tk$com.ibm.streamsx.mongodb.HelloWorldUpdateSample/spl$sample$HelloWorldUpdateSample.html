<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="SPL File HelloWorldUpdateSample.spl"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_compilationunit"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>SPL File HelloWorldUpdateSample.spl</title>
</head>
<body id="spldoc_compilationunit">


<h1 class="title topictitle1">SPL File <tt class="ph tt">HelloWorldUpdateSample.spl</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">Toolkits</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.mongodb.HelloWorldUpdateSample.html">com.ibm.streamsx.mongodb.HelloWorldUpdateSample 1.0.0</a> &gt; <a class="xref" href="ns$sample.html">sample</a> &gt; HelloWorldUpdateSample.spl</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Content</h2>
  
  <dl class="dl">
    <dt class="dt dlterm"/>
<dd class="dd"/>

    
      <dt class="dt dlterm splhead-2">Operators</dt>

      <dd class="dd">
<ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="spl$sample$HelloWorldUpdateSample.html#spldoc_compilationunit__composite_operator__HelloWorldUpdateSample">HelloWorldUpdateSample</a></strong>: Run two beacons to create different inputs.
</li>

</ul>

      </dd>

    
  </dl>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Composites</h2>
  
</div>

<div class="section" id="spldoc_compilationunit__composite_operator__HelloWorldUpdateSample"><h2 class="title sectiontitle splpart">public composite HelloWorldUpdateSample</h2>
  
</div>

<div class="section splgraph">
  <embed class="image" src="../../image/tk$com.ibm.streamsx.mongodb.HelloWorldUpdateSample/op$sample$HelloWorldUpdateSample.svg" width="337" height="154"/>
</div>

<div class="section">

<p class="p">Run two beacons to create different inputs. Look inside <a class="xref" href="spl$sample$HelloWorldUpdateSample.html#spldoc_compilationunit__composite_operator__HelloWorldUpdateSample">HelloWorldUpdateSample</a> SPL code to see different uses of UpdateDocument with the description. 
</p>

</div>

<div class="section">
</div>

<div class="section">
</div>

<div class="section">
</div>

<div class="section"><h2 class="title sectiontitle splhead-2">SPL Source Code</h2>
  
</div>


<div class="section">
   <pre class="pre codeblock">

 composite HelloWorldUpdateSample {
 	graph
 		stream&lt;rstring greeting1&gt; B1Stream = Beacon()  {
             param iterations: 1;
             output B1Stream :
             	greeting1 = "HELLO WORLD";
         }
         
 		stream&lt;rstring greeting2&gt; B2Stream = Beacon()  {
             param iterations: 1;
             output B2Stream :
             	greeting2 = "Hello again";
         }
         
         stream&lt;rstring error1&gt; MongoSink = Update(B1Stream; B2Stream) {
         	param
         		dbHost : "localhost";
         		findQuery : {greeting1 = {"$exists": true}};
         	/*
         	 * Uncomment authentication parameter for custom authentication method
         	 */
 
 //        		authentication : {mechanism = getSubmissionTimeValue("mechanism", "SCRAM-SHA-1"),
 //        						  user = getSubmissionTimeValue("username", "mongouser"),
 //        						  pwd = getSubmissionTimeValue("password", "passw0rd"),
 //        						  db = getSubmissionTimeValue("adminDB", "admin"),
 //        						  digestPassword = (boolean)getSubmissionTimeValue("digestPassword", "true"),
 //        						  serviceName = getSubmissionTimeValue("serviceName", ""),
 //        						  serviceHostname = getSubmissionTimeValue("serviceHostname", "")};
 
 
         	/*
         	 * Uncomment sslOptions parameter to configure SSL
         	 */
 				// Create etc directory and add there PEM file.
 //        		sslOptions : {sslMode = true, caFile = "", pemKeyFile = getThisToolkitDir() + "/etc/mongodb.pem", pemKeyPassword = "", crlFile = "", allowInvalidCertificates = false, allowInvalidHostnames = false};
 
         	/*
         	 * Uncomment username/password parameters for a default authentication method
         	 */
 //        		username : getSubmissionTimeValue("username", "mongouser");
 //        		password : getSubmissionTimeValue("password", "passw0rd");
 
         	/*
         	 * Uncomment profiling parameter to enable profiling mode
         	 */
 //        		profiling : all;
 
         	output MongoSink :
         		/**
 				 * Update/Upsert samples:
 				 */
         		error1 = UpdateDocument("streams", "sample", B1Stream); // Updates one document where 'greeting1' exists
 //        		error1 = UpdateDocuments("streams", "sample", B1Stream); // Updates all documents where 'greeting1' exists
 //        		error1 = UpsertDocument("streams", "sample", "$set", B2Stream); // Upserts one document where 'greeting1' exists
 //        		error1 = UpsertDocuments("streams", "sample", "$set", B2Stream); // Upserts all document where 'greeting1' exists
         }
         
 		/**
 		 * Will be called when at least one error occured
 		 */
         () as ErrorSink = FileSink(MongoSink)   {
             param
                 file : "/dev/stdout";
                 flush : 1u;
                 quoteStrings : false;
         }
 }

   </pre>

</div>

</div>


</body>
</html>